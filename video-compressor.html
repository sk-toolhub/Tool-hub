<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üéûÔ∏èOnline Video Compressor | Reduce Video Size Fast ‚Äì Sk ToolHub</title>
  <meta name="description" content="Compress video files online without quality loss. Reduce video size for web and mobile with SK ToolHub‚Äôs free video compressor.">
 <meta name="keywords" content="video compressor online, compress video file, reduce video size without losing quality, free video compression tool, HD video compressor, compress MP4 MOV AVI MKV videos, video size reducer online, compress video to 100MB 200MB 500MB, mobile video compressor online,
video compression for YouTube upload, video compressor for WhatsApp, shrink video file fast, best free video compressor without watermark,
compress 4K and 1080p video online, bulk video compression tool, optimize video for website upload, automatic video compressor online, reduce video size for email and social media,
upload video and download compressed file,
video compressor for school office work,
online fast and secure video compression
">
  <!-- FFmpeg.wasm with CORE FILE -->
  <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.4/dist/ffmpeg.min.js"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #f5f9ff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      flex-direction: column;
    }
    .container {
      background: #fff;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      max-width: 700px;
      width: 100%;
      text-align: center;
      margin-top: 20px;
    }
    h1 {
      color: #0066ff;
      margin-bottom: 10px;
      font-size: 28px;
    }
    h2 {
      color: #555;
      margin-bottom: 25px;
      font-size: 18px;
      font-weight: normal;
    }
    .upload-area {
      border: 3px dashed #0066ff;
      border-radius: 10px;
      padding: 40px 20px;
      margin: 20px 0;
      background: #f0f7ff;
      cursor: pointer;
      transition: 0.3s;
    }
    .upload-area:hover {
      background: #e6f0ff;
      border-color: #004fcc;
    }
    input[type="file"] {
      display: none;
    }
    .file-label {
      display: inline-block;
      background: #0066ff;
      color: white;
      padding: 12px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      margin: 10px 0;
      transition: 0.3s;
    }
    .file-label:hover {
      background: #004fcc;
    }
    select {
      margin: 15px 0;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      width: 100%;
      font-size: 16px;
      background: white;
    }
    button {
      background: #0066ff;
      color: #fff;
      border: none;
      padding: 14px 30px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      margin: 15px 5px;
      transition: 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    button:hover:not(:disabled) {
      background: #004fcc;
      transform: translateY(-2px);
    }
    button:disabled {
      background: #999;
      cursor: not-allowed;
    }
    video {
      width: 100%;
      max-width: 500px;
      margin: 20px auto;
      border-radius: 10px;
      display: block;
      background: #000;
    }
    .progress-container {
      margin: 20px 0;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 10px;
      display: none;
    }
    .progress-bar {
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      overflow: hidden;
      margin: 10px 0;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #0066ff, #00ccff);
      width: 0%;
      transition: width 0.3s;
    }
    #progressText {
      color: #0066ff;
      font-weight: 500;
      margin: 10px 0;
      min-height: 24px;
    }
    .result {
      margin-top: 20px;
      padding: 20px;
      background: #e8f6f3;
      border-radius: 10px;
      display: none;
    }
    .back-home {
      background: white;
      width: 100%;
      padding: 15px;
      text-align: center;
      border-bottom: 1px solid #e5e7eb;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .back-home a {
      text-decoration: none;
      color: #0066ff;
      font-weight: 600;
      font-size: 16px;
      border: 2px solid #0066ff;
      padding: 8px 20px;
      border-radius: 25px;
      transition: 0.3s;
    }
    .back-home a:hover {
      background: #0066ff;
      color: white;
    }
    .tools-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
      margin-top: 20px;
      padding: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .tools-list a {
      color: #0066ff;
      text-decoration: none;
      padding: 8px;
      border-radius: 6px;
      transition: 0.3s;
    }
    .tools-list a:hover {
      background: #f0f7ff;
    }
    .spinner {
      animation: spin 1s linear infinite;
      display: inline-block;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Back to Home -->
  <div class="back-home">
    <a href="index.html">‚Üê Back to Home</a>
  </div>

  <div class="container">
    <h1>üé¨ Video Compressor</h1>
    <h2>Reduce Video File Size Online - No Quality Loss</h2>
    
    <!-- Upload Area -->
    <div class="upload-area" id="uploadArea">
      <i class="fas fa-cloud-upload-alt" style="font-size: 48px; color: #0066ff; margin-bottom: 15px;"></i>
      <h3>Upload Your Video</h3>
      <p>Drag & drop or click to select video file</p>
      <input type="file" id="videoInput" accept="video/*" />
      <label for="videoInput" class="file-label">
        <i class="fas fa-folder-open"></i> Choose Video File
      </label>
      <p id="fileInfo" style="margin-top: 10px; color: #666;">
        Supported: MP4, MOV, AVI, MKV, WebM (Max 100MB)
      </p>
    </div>

    <!-- Settings -->
    <select id="qualitySelect">
      <option value="23">High Quality (Less Compression)</option>
      <option value="28" selected>Medium Quality (Balanced)</option>
      <option value="35">Low Quality (Maximum Compression)</option>
    </select>

    <!-- Progress -->
    <div class="progress-container" id="progressContainer">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div id="progressText"></div>
    </div>

    <!-- Buttons -->
    <div>
      <button id="compressBtn">
        <i class="fas fa-compress-alt"></i> Compress Video
      </button>
      <button id="resetBtn" style="background: #6c757d;">
        <i class="fas fa-redo"></i> Reset
      </button>
    </div>

    <!-- Preview -->
    <video id="preview" controls style="display: none;"></video>

    <!-- Result -->
    <div class="result" id="resultSection">
      <h3 style="color: #27ae60; margin-bottom: 15px;">
        <i class="fas fa-check-circle"></i> Compression Complete!
      </h3>
      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="text-align: center;">
          <div id="originalSize" style="font-size: 24px; font-weight: bold; color: #0066ff;">-- MB</div>
          <div style="color: #666; font-size: 14px;">Original Size</div>
        </div>
        <div style="text-align: center;">
          <div id="compressedSize" style="font-size: 24px; font-weight: bold; color: #27ae60;">-- MB</div>
          <div style="color: #666; font-size: 14px;">Compressed Size</div>
        </div>
        <div style="text-align: center;">
          <div id="savings" style="font-size: 24px; font-weight: bold; color: #e74c3c;">-- %</div>
          <div style="color: #666; font-size: 14px;">Space Saved</div>
        </div>
      </div>
      <a id="downloadLink" download style="display: none;">
        <button style="background: #27ae60; width: 100%;">
          <i class="fas fa-download"></i> Download Compressed Video
        </button>
      </a>
    </div>
  </div>

  <!-- More Tools -->
  <div style="max-width: 700px; width: 100%; margin-top: 30px;">
    <h3 style="color:#0066ff; text-align:center; margin-bottom: 15px;">‚ú® More Useful Tools</h3>
    <div class="tools-list">
      <a href="image-compressor.html">Image Compressor</a>
      <a href="image-converter.html">Image Converter</a>
      <a href="image-cropper.html">Image Cropper</a>
      <a href="image-rotator.html">Image Rotator</a>
      <a href="image-to-text.html">Image to Text</a>
      <a href="video-trimmer.html">Video Trimmer</a>
      <a href="pdf-compressor.html">PDF Compressor</a>
      <a href="jpg-to-pdf.html">JPG to PDF</a>
      <a href="pdf-to-jpg.html">PDF to JPG</a>
    </div>
  </div>

  <!-- Font Awesome -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

  <script>
    // FFmpeg Configuration with CORE PATH
    const { createFFmpeg, fetchFile } = FFmpeg;
    let ffmpeg = null;
    
    // DOM Elements
    const videoInput = document.getElementById("videoInput");
    const qualitySelect = document.getElementById("qualitySelect");
    const compressBtn = document.getElementById("compressBtn");
    const resetBtn = document.getElementById("resetBtn");
    const progressText = document.getElementById("progressText");
    const progressContainer = document.getElementById("progressContainer");
    const progressFill = document.getElementById("progressFill");
    const preview = document.getElementById("preview");
    const resultSection = document.getElementById("resultSection");
    const downloadLink = document.getElementById("downloadLink");
    const fileInfo = document.getElementById("fileInfo");
    const uploadArea = document.getElementById("uploadArea");

    // Initialize FFmpeg
    async function initFFmpeg() {
      if (!ffmpeg) {
        ffmpeg = createFFmpeg({ 
          log: true,
          corePath: 'https://unpkg.com/@ffmpeg/core@0.11.0/dist/ffmpeg-core.js',
          progress: ({ ratio }) => {
            const percent = Math.round(ratio * 100);
            progressFill.style.width = `${percent}%`;
            progressText.innerHTML = `<span class="spinner">‚è≥</span> Compressing... ${percent}%`;
            
            if (percent === 100) {
              progressText.innerHTML = '<span style="color:#27ae60">‚úÖ Finalizing compression...</span>';
            }
          }
        });
      }
      
      if (!ffmpeg.isLoaded()) {
        progressContainer.style.display = 'block';
        progressText.innerHTML = '<span style="color:#e67e22">üîÑ Loading FFmpeg engine (first time: 20-30 seconds)...</span>';
        await ffmpeg.load();
        progressText.innerHTML = '<span style="color:#27ae60">‚úÖ FFmpeg ready! Upload your video.</span>';
        setTimeout(() => {
          progressContainer.style.display = 'none';
        }, 2000);
      }
      return ffmpeg;
    }

    // File Selection Handler
    videoInput.addEventListener("change", function() {
      if (this.files.length) {
        const file = this.files[0];
        const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);
        
        // Check file size
        if (file.size > 100 * 1024 * 1024) {
          alert("File size exceeds 100MB limit. Please choose a smaller video.");
          this.value = "";
          return;
        }
        
        fileInfo.innerHTML = `<strong>Selected:</strong> ${file.name} (${fileSizeMB} MB)`;
        uploadArea.style.borderColor = "#27ae60";
        uploadArea.style.background = "#e8f6f3";
        
        // Show preview
        const url = URL.createObjectURL(file);
        preview.src = url;
        preview.style.display = 'block';
        
        // Reset result section
        resultSection.style.display = 'none';
      }
    });

    // Drag and Drop
    uploadArea.addEventListener('dragover', (e) => {
      e.preventDefault();
      uploadArea.style.borderColor = "#004fcc";
      uploadArea.style.background = "#e6f0ff";
    });

    uploadArea.addEventListener('dragleave', () => {
      uploadArea.style.borderColor = "#0066ff";
      uploadArea.style.background = "#f0f7ff";
    });

    uploadArea.addEventListener('drop', (e) => {
      e.preventDefault();
      uploadArea.style.borderColor = "#0066ff";
      uploadArea.style.background = "#f0f7ff";
      
      if (e.dataTransfer.files.length) {
        videoInput.files = e.dataTransfer.files;
        videoInput.dispatchEvent(new Event('change'));
      }
    });

    // Compression Button
    compressBtn.addEventListener("click", async () => {
      if (!videoInput.files.length) {
        alert("Please select a video file first!");
        return;
      }

      const file = videoInput.files[0];
      const crf = qualitySelect.value;
      const originalSizeMB = (file.size / (1024 * 1024)).toFixed(2);
      
      // UI Updates
      compressBtn.disabled = true;
      compressBtn.innerHTML = '<span class="spinner">‚è≥</span> Compressing...';
      progressContainer.style.display = 'block';
      progressFill.style.width = '0%';
      resultSection.style.display = 'none';
      
      try {
        // Initialize FFmpeg
        const ffmpegInstance = await initFFmpeg();
        
        // Prepare file names
        const ext = file.name.split('.').pop();
        const inputName = `input.${ext}`;
        const outputName = `compressed_${Date.now()}.mp4`;
        
        // Write file to FFmpeg FS
        ffmpegInstance.FS("writeFile", inputName, await fetchFile(file));
        
        // Run compression
        await ffmpegInstance.run(
          "-i", inputName,
          "-vcodec", "libx264",
          "-crf", crf,
          "-preset", "medium",
          "-acodec", "aac",
          "-b:a", "128k",
          outputName
        );

        // Get compressed file
        const data = ffmpegInstance.FS("readFile", outputName);
        const compressedBlob = new Blob([data.buffer], { type: "video/mp4" });
        const compressedSizeMB = (compressedBlob.size / (1024 * 1024)).toFixed(2);
        const savedPercent = ((1 - compressedBlob.size / file.size) * 100).toFixed(1);
        
        // Create download URL
        const videoURL = URL.createObjectURL(compressedBlob);
        
        // Update UI with results
        document.getElementById("originalSize").textContent = `${originalSizeMB} MB`;
        document.getElementById("compressedSize").textContent = `${compressedSizeMB} MB`;
        document.getElementById("savings").textContent = `${savedPercent} %`;
        
        // Update preview
        preview.src = videoURL;
        
        // Setup download link
        downloadLink.href = videoURL;
        downloadLink.download = outputName;
        downloadLink.style.display = 'block';
        
        // Show result section
        resultSection.style.display = 'block';
        progressContainer.style.display = 'none';
        progressText.innerHTML = '<span style="color:#27ae60">‚úÖ Compression successful!</span>';
        
        // Clean up URL after download
        downloadLink.onclick = () => {
          setTimeout(() => URL.revokeObjectURL(videoURL), 1000);
        };
        
      } catch (error) {
        console.error("Compression error:", error);
        progressText.innerHTML = `<span style="color:#e74c3c">‚ùå Error: ${error.message}</span>`;
        alert("Compression failed. Please try with a smaller video (under 50MB) or different format (MP4 recommended).");
      } finally {
        compressBtn.disabled = false;
        compressBtn.innerHTML = '<i class="fas fa-compress-alt"></i> Compress Video';
      }
    });

    // Reset Button
    resetBtn.addEventListener("click", () => {
      videoInput.value = "";
      fileInfo.innerHTML = "Supported: MP4, MOV, AVI, MKV, WebM (Max 100MB)";
      uploadArea.style.borderColor = "#0066ff";
      uploadArea.style.background = "#f0f7ff";
      preview.src = "";
      preview.style.display = 'none';
      resultSection.style.display = 'none';
      progressContainer.style.display = 'none';
      progressFill.style.width = '0%';
      progressText.innerHTML = "";
      downloadLink.style.display = 'none';
    });

    // Initialize on page load
    window.addEventListener('load', () => {
      // FFmpeg will load when user clicks compress button
      progressText.innerHTML = 'Ready to compress videos!';
    });
  </script>
</body>
</html>
